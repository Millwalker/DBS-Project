<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYkmjAab2iQrpV5sB_wejlVvfVjFio2R0&callback=initMap&libraries=&v=weekly"
    ></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="app">
    <div id="map"></div>
    <div id="controls">
        <div class="slidecontainer">
            <p id="sliderValue"></p>
            <input type="range" min="1" max="100" value="50" class="slider" id="slider">
        </div>
    </div>
</div>
<script>
    const slider = document.getElementById("slider");
    const sliderValue = document.getElementById("sliderValue");
    const map = new google.maps.Map(document.getElementById("map"), {
        center: {
            lat: 52.4075694,
            lng: 13.5033169
        },
        zoom: 3
    });

    function initSlider() {
        sliderValue.innerHTML = slider.value; // Display the default slider value

        slider.oninput = function () {
            sliderValue.innerHTML = this.value;
        }
    }
    initSlider();

    function createCircle(center, radius) {
        new google.maps.Circle({
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 0,
            fillColor: "#FF0000",
            fillOpacity: 0.35,
            map,
            center: {
                lat: +center[0],
                lng: +center[1]
            },
            radius: radius
        });
    }

    fetch('location-by-geocode.json')
        .then(response => response.json())
        .then(data => {

            for (let isoCode of Object.keys(data)) {
                const countryData = data[isoCode];
                const location = countryData.location;

                if (location === [])
                    continue;

                createCircle(location, 100000);
            }
        })

</script>
</body>
</html>